{"remainingRequest":"D:\\Vue\\hello\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue\\hello\\src\\views\\reception\\User\\UserOrderAll.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue\\hello\\src\\views\\reception\\User\\UserOrderAll.vue","mtime":1636596213546},{"path":"D:\\Vue\\hello\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1633489514687},{"path":"D:\\Vue\\hello\\node_modules\\babel-loader\\lib\\index.js","mtime":1633489516581},{"path":"D:\\Vue\\hello\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1633489514687},{"path":"D:\\Vue\\hello\\node_modules\\vue-loader\\lib\\index.js","mtime":1633489516986}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5maW5kQWxsVXNlck9yZGVyKCk7DQogICAgdGhpcy5maW5kVXNlck9yZGVyVG9UYWwoKTsNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgYWxsT3JkZXI6IFtdLA0KICAgICAgcGFnZU51bTogMCwNCiAgICAgIHBhZ2VTaXplOiAzLA0KICAgICAgdG90YWw6IDAsDQogICAgICBkaWFsb2dWaXNpYmxlOmZhbHNlLA0KICAgICAgb3JkZXJJZDowLA0KICAgICAgcmF0ZVZhbDpudWxsLA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICByZW1vdmVPcmRlcih2YWwpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oIuaYr+WQpuWIoOmZpOatpOiuouWNle+8nyIsICLmj5DnpLoiLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgICAgY2VudGVyOiB0cnVlLA0KICAgICAgfSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KGAvb3JkZXIvcmVtb3ZlVXNlck9yZGVyP2lkPSR7dmFsfWApLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDIwMCkgdGhpcy4kbWVzc2FnZS5lcnJvcigi5bey5Yig6Zmk77yBIik7DQogICAgICAgICAgICB0aGlzLmZpbmRBbGxVc2VyT3JkZXIoKTsNCiAgICAgICAgICAgIHRoaXMuZmluZFVzZXJPcmRlclRvVGFsKCk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKCLlt7Llj5bmtojvvIEiKTsNCiAgICAgICAgfSk7DQogICAgICBjb25zb2xlLmxvZyh2YWwpOw0KICAgIH0sDQogICAgZmluZEFsbFVzZXJPcmRlcigpIHsNCiAgICAgIGNvbnN0IHVzZXJfaWQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibG9nSWQiKTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHVzZXJfaWQpOw0KICAgICAgdGhpcy4kaHR0cA0KICAgICAgICAucG9zdCgNCiAgICAgICAgICBgL29yZGVyL2ZpbmRBbGxVc2VyT3JkZXJCeUlkP3VzZXJfaWQ9JHt1c2VyX2lkfSZwYWdlTnVtPSR7dGhpcy5wYWdlTnVtfSZwYWdlU2l6ZT0ke3RoaXMucGFnZVNpemV9YA0KICAgICAgICApDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgIHRoaXMuYWxsT3JkZXIgPSByZXMuZGF0YS5kYXRhOw0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYWxsT3JkZXIpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGZpbmRVc2VyT3JkZXJUb1RhbCgpIHsNCiAgICAgIGNvbnN0IHVzZXJfaWQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibG9nSWQiKTsNCiAgICAgIHRoaXMuJGh0dHANCiAgICAgICAgLnBvc3QoYC9vcmRlci9maW5kVXNlck9yZGVyVG9UYWw/dXNlcl9pZD0ke3VzZXJfaWR9YCkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7DQogICAgICB0aGlzLmZpbmRBbGxVc2VyT3JkZXIoKTsNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnBhZ2VOdW0gPSB2YWw7DQogICAgICB0aGlzLmZpbmRBbGxVc2VyT3JkZXIoKTsNCiAgICB9LA0KICAgIC8vIOehruiupOaUtui0pw0KICAgIC8vIO+8iOS4reS8oOaWueazle+8iQ0KICAgIGZpbmRDb25maXJtSWQoaWQpew0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIHRoaXMub3JkZXJJZCA9IGlkOw0KICAgIH0sDQogICAgY29uZmlybUdvb2RzKCkgew0KICAgICAgLy8gY29uc29sZS5sb2codGhpcy5vcmRlcklkKTsNCiAgICAgIHRoaXMuJGh0dHAucG9zdCgnL29yZGVyL2NvbmZpcm1Hb29kcycsdGhpcy5vcmRlcklkKS50aGVuKChyZXMpPT57DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgIGlmKHJlcy5kYXRhLmNvZGU9PTIwMCl7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCflt7Lnoa7orqTmlLbotKcnKQ0KICAgICAgICAgIHRoaXMuZmluZEFsbFVzZXJPcmRlcigpOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgLy8gY29uc29sZS5sb2codGhpcy5yYXRlVmFsKTsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgIH0sDQogICAgY2FuY2VsT3JkZXIoaWQpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKGlkKTsNCiAgICAgIHRoaXMuJGh0dHAucG9zdCgnL29yZGVyL25vUGF5JyxpZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDIwMCkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygi5bey5Y+W5raI6K6i5Y2VIik7DQogICAgICAgICAgdGhpcy5maW5kQWxsVXNlck9yZGVyKCk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["UserOrderAll.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserOrderAll.vue","sourceRoot":"src/views/reception/User","sourcesContent":["<template>\r\n  <div class=\"app\">\r\n    <!-- <p>hello word</p> -->\r\n    <el-table :data=\"allOrder\" stripe>\r\n      <el-table-column label=\"订单号\" prop=\"code\" width=\"230\"></el-table-column>\r\n      <el-table-column label=\"商品名称\" prop=\"item_name\" width=\"200\">\r\n        <!-- <template slot-scope=\"scope\">\r\n          <el-image :src=\"scope.row.url1\"></el-image>\r\n        </template> -->\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"单价\"\r\n        prop=\"unit_price\"\r\n        width=\"110\"\r\n      ></el-table-column>\r\n      <el-table-column label=\"数量\" prop=\"total\" width=\"110\"></el-table-column>\r\n      <el-table-column label=\"实付\" prop=\"price\" width=\"110\"></el-table-column>\r\n      <el-table-column label=\"订单状态\" prop=\"status\" width=\"120\">\r\n        <template slot-scope=\"scope\">\r\n          <p v-if=\"scope.row.status == 0\">新建待发货</p>\r\n          <p v-else-if=\"scope.row.status == 1\" id=\"wait\">\r\n            <span id=\"waitGoods\">已发货</span>\r\n            <el-button\r\n              plain\r\n              round\r\n              type=\"primary\"\r\n              @click=\"findConfirmId(scope.row.id)\"\r\n              >确认收货</el-button\r\n            >\r\n          </p>\r\n          <p v-else-if=\"scope.row.status == 2\">订单已完成</p>\r\n          <p v-else-if=\"scope.row.status == 3\">订单已评价</p>\r\n          <p v-else-if=\"scope.row.status == 4\" class=\"waitPay\">\r\n            <span id=\"waitPay\">未支付</span>\r\n            <el-button\r\n              plain\r\n              round\r\n              type=\"warning\"\r\n              @click=\"cancelOrder(scope.row.id)\"\r\n              >取消订单</el-button\r\n            >\r\n          </p>\r\n          <p v-else-if=\"scope.row.status == 5\">订单已取消</p>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"删除订单\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            circle\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            @click=\"removeOrder(scope.row.id)\"\r\n          ></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      background\r\n      layout=\"prev, pager, next, jumper\"\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"pageNum\"\r\n      :page-size=\"pageSize\"\r\n      :total=\"total\"\r\n    >\r\n    </el-pagination>\r\n    <el-dialog\r\n      title=\"评分\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"30%\"\r\n    >\r\n      <el-rate\r\n       v-model=\"rateVal\"\r\n       show-text>\r\n      </el-rate>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirmGoods\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  created() {\r\n    this.findAllUserOrder();\r\n    this.findUserOrderToTal();\r\n  },\r\n  data() {\r\n    return {\r\n      allOrder: [],\r\n      pageNum: 0,\r\n      pageSize: 3,\r\n      total: 0,\r\n      dialogVisible:false,\r\n      orderId:0,\r\n      rateVal:null,\r\n    };\r\n  },\r\n  methods: {\r\n    removeOrder(val) {\r\n      this.$confirm(\"是否删除此订单？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n        center: true,\r\n      })\r\n        .then(() => {\r\n          // console.log(res);\r\n          this.$http.post(`/order/removeUserOrder?id=${val}`).then((res) => {\r\n            // console.log(res);\r\n            if (res.data.code == 200) this.$message.error(\"已删除！\");\r\n            this.findAllUserOrder();\r\n            this.findUserOrderToTal();\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.$message.info(\"已取消！\");\r\n        });\r\n      console.log(val);\r\n    },\r\n    findAllUserOrder() {\r\n      const user_id = window.sessionStorage.getItem(\"logId\");\r\n      // console.log(user_id);\r\n      this.$http\r\n        .post(\r\n          `/order/findAllUserOrderById?user_id=${user_id}&pageNum=${this.pageNum}&pageSize=${this.pageSize}`\r\n        )\r\n        .then((res) => {\r\n          // console.log(res);\r\n          this.allOrder = res.data.data;\r\n          // console.log(this.allOrder);\r\n        });\r\n    },\r\n    findUserOrderToTal() {\r\n      const user_id = window.sessionStorage.getItem(\"logId\");\r\n      this.$http\r\n        .post(`/order/findUserOrderToTal?user_id=${user_id}`)\r\n        .then((res) => {\r\n          // console.log(res);\r\n          this.total = res.data.data;\r\n        });\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.findAllUserOrder();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pageNum = val;\r\n      this.findAllUserOrder();\r\n    },\r\n    // 确认收货\r\n    // （中传方法）\r\n    findConfirmId(id){\r\n      this.dialogVisible = true;\r\n      this.orderId = id;\r\n    },\r\n    confirmGoods() {\r\n      // console.log(this.orderId);\r\n      this.$http.post('/order/confirmGoods',this.orderId).then((res)=>{\r\n        // console.log(res);\r\n        if(res.data.code==200){\r\n          this.$message.success('已确认收货')\r\n          this.findAllUserOrder();\r\n        }\r\n      })\r\n      // console.log(this.rateVal);\r\n      this.dialogVisible = false;\r\n    },\r\n    cancelOrder(id) {\r\n      // console.log(id);\r\n      this.$http.post('/order/noPay',id).then((res) => {\r\n        // console.log(res);\r\n        if (res.data.code == 200) {\r\n          this.$message.info(\"已取消订单\");\r\n          this.findAllUserOrder();\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.app {\r\n  height: 100%;\r\n}\r\n#waitGoods {\r\n  font-size: 12px;\r\n  padding: 0px 0px 0px 30px;\r\n}\r\n#waitPay {\r\n  font-size: 12px;\r\n  padding: 0px 0px 0px 30px;\r\n}\r\n#wait {\r\n  position: relative;\r\n  bottom: 10px;\r\n  left: -10px;\r\n}\r\n.waitPay {\r\n  position: relative;\r\n  bottom: 10px;\r\n  left: -10px;\r\n}\r\n</style>"]}]}