{"remainingRequest":"D:\\Vue\\hello\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue\\hello\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Vue\\hello\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue\\hello\\src\\views\\reception\\User\\UserOrderAll.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue\\hello\\src\\views\\reception\\User\\UserOrderAll.vue","mtime":1636596213546},{"path":"D:\\Vue\\hello\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1633489514687},{"path":"D:\\Vue\\hello\\node_modules\\babel-loader\\lib\\index.js","mtime":1633489516581},{"path":"D:\\Vue\\hello\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1633489514687},{"path":"D:\\Vue\\hello\\node_modules\\vue-loader\\lib\\index.js","mtime":1633489516986},{"path":"D:\\Vue\\hello\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1633489514687},{"path":"D:\\Vue\\hello\\node_modules\\babel-loader\\lib\\index.js","mtime":1633489516581},{"path":"D:\\Vue\\hello\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1633489514687},{"path":"D:\\Vue\\hello\\node_modules\\vue-loader\\lib\\index.js","mtime":1633489516986}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZpbmRBbGxVc2VyT3JkZXIoKTsKICAgIHRoaXMuZmluZFVzZXJPcmRlclRvVGFsKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWxsT3JkZXI6IFtdLAogICAgICBwYWdlTnVtOiAwLAogICAgICBwYWdlU2l6ZTogMywKICAgICAgdG90YWw6IDAsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBvcmRlcklkOiAwLAogICAgICByYXRlVmFsOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcmVtb3ZlT3JkZXI6IGZ1bmN0aW9uIHJlbW92ZU9yZGVyKHZhbCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybSgi5piv5ZCm5Yig6Zmk5q2k6K6i5Y2V77yfIiwgIuaPkOekuiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgIGNlbnRlcjogdHJ1ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIF90aGlzLiRodHRwLnBvc3QoIi9vcmRlci9yZW1vdmVVc2VyT3JkZXI/aWQ9Ii5jb25jYXQodmFsKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMjAwKSBfdGhpcy4kbWVzc2FnZS5lcnJvcigi5bey5Yig6Zmk77yBIik7CgogICAgICAgICAgX3RoaXMuZmluZEFsbFVzZXJPcmRlcigpOwoKICAgICAgICAgIF90aGlzLmZpbmRVc2VyT3JkZXJUb1RhbCgpOwogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UuaW5mbygi5bey5Y+W5raI77yBIik7CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyh2YWwpOwogICAgfSwKICAgIGZpbmRBbGxVc2VyT3JkZXI6IGZ1bmN0aW9uIGZpbmRBbGxVc2VyT3JkZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHVzZXJfaWQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibG9nSWQiKTsgLy8gY29uc29sZS5sb2codXNlcl9pZCk7CgogICAgICB0aGlzLiRodHRwLnBvc3QoIi9vcmRlci9maW5kQWxsVXNlck9yZGVyQnlJZD91c2VyX2lkPSIuY29uY2F0KHVzZXJfaWQsICImcGFnZU51bT0iKS5jb25jYXQodGhpcy5wYWdlTnVtLCAiJnBhZ2VTaXplPSIpLmNvbmNhdCh0aGlzLnBhZ2VTaXplKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKTsKICAgICAgICBfdGhpczIuYWxsT3JkZXIgPSByZXMuZGF0YS5kYXRhOyAvLyBjb25zb2xlLmxvZyh0aGlzLmFsbE9yZGVyKTsKICAgICAgfSk7CiAgICB9LAogICAgZmluZFVzZXJPcmRlclRvVGFsOiBmdW5jdGlvbiBmaW5kVXNlck9yZGVyVG9UYWwoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHVzZXJfaWQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibG9nSWQiKTsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCIvb3JkZXIvZmluZFVzZXJPcmRlclRvVGFsP3VzZXJfaWQ9Ii5jb25jYXQodXNlcl9pZCkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgX3RoaXMzLnRvdGFsID0gcmVzLmRhdGEuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHZhbDsKICAgICAgdGhpcy5maW5kQWxsVXNlck9yZGVyKCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlTnVtID0gdmFsOwogICAgICB0aGlzLmZpbmRBbGxVc2VyT3JkZXIoKTsKICAgIH0sCiAgICAvLyDnoa7orqTmlLbotKcKICAgIC8vIO+8iOS4reS8oOaWueazle+8iQogICAgZmluZENvbmZpcm1JZDogZnVuY3Rpb24gZmluZENvbmZpcm1JZChpZCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLm9yZGVySWQgPSBpZDsKICAgIH0sCiAgICBjb25maXJtR29vZHM6IGZ1bmN0aW9uIGNvbmZpcm1Hb29kcygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm9yZGVySWQpOwogICAgICB0aGlzLiRodHRwLnBvc3QoJy9vcmRlci9jb25maXJtR29vZHMnLCB0aGlzLm9yZGVySWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICBfdGhpczQuJG1lc3NhZ2Uuc3VjY2Vzcygn5bey56Gu6K6k5pS26LSnJyk7CgogICAgICAgICAgX3RoaXM0LmZpbmRBbGxVc2VyT3JkZXIoKTsKICAgICAgICB9CiAgICAgIH0pOyAvLyBjb25zb2xlLmxvZyh0aGlzLnJhdGVWYWwpOwoKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgY2FuY2VsT3JkZXI6IGZ1bmN0aW9uIGNhbmNlbE9yZGVyKGlkKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgLy8gY29uc29sZS5sb2coaWQpOwogICAgICB0aGlzLiRodHRwLnBvc3QoJy9vcmRlci9ub1BheScsIGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDIwMCkgewogICAgICAgICAgX3RoaXM1LiRtZXNzYWdlLmluZm8oIuW3suWPlua2iOiuouWNlSIpOwoKICAgICAgICAgIF90aGlzNS5maW5kQWxsVXNlck9yZGVyKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["UserOrderAll.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"app\">\r\n    <!-- <p>hello word</p> -->\r\n    <el-table :data=\"allOrder\" stripe>\r\n      <el-table-column label=\"订单号\" prop=\"code\" width=\"230\"></el-table-column>\r\n      <el-table-column label=\"商品名称\" prop=\"item_name\" width=\"200\">\r\n        <!-- <template slot-scope=\"scope\">\r\n          <el-image :src=\"scope.row.url1\"></el-image>\r\n        </template> -->\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"单价\"\r\n        prop=\"unit_price\"\r\n        width=\"110\"\r\n      ></el-table-column>\r\n      <el-table-column label=\"数量\" prop=\"total\" width=\"110\"></el-table-column>\r\n      <el-table-column label=\"实付\" prop=\"price\" width=\"110\"></el-table-column>\r\n      <el-table-column label=\"订单状态\" prop=\"status\" width=\"120\">\r\n        <template slot-scope=\"scope\">\r\n          <p v-if=\"scope.row.status == 0\">新建待发货</p>\r\n          <p v-else-if=\"scope.row.status == 1\" id=\"wait\">\r\n            <span id=\"waitGoods\">已发货</span>\r\n            <el-button\r\n              plain\r\n              round\r\n              type=\"primary\"\r\n              @click=\"findConfirmId(scope.row.id)\"\r\n              >确认收货</el-button\r\n            >\r\n          </p>\r\n          <p v-else-if=\"scope.row.status == 2\">订单已完成</p>\r\n          <p v-else-if=\"scope.row.status == 3\">订单已评价</p>\r\n          <p v-else-if=\"scope.row.status == 4\" class=\"waitPay\">\r\n            <span id=\"waitPay\">未支付</span>\r\n            <el-button\r\n              plain\r\n              round\r\n              type=\"warning\"\r\n              @click=\"cancelOrder(scope.row.id)\"\r\n              >取消订单</el-button\r\n            >\r\n          </p>\r\n          <p v-else-if=\"scope.row.status == 5\">订单已取消</p>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"删除订单\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            circle\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            @click=\"removeOrder(scope.row.id)\"\r\n          ></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      background\r\n      layout=\"prev, pager, next, jumper\"\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"pageNum\"\r\n      :page-size=\"pageSize\"\r\n      :total=\"total\"\r\n    >\r\n    </el-pagination>\r\n    <el-dialog\r\n      title=\"评分\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"30%\"\r\n    >\r\n      <el-rate\r\n       v-model=\"rateVal\"\r\n       show-text>\r\n      </el-rate>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirmGoods\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  created() {\r\n    this.findAllUserOrder();\r\n    this.findUserOrderToTal();\r\n  },\r\n  data() {\r\n    return {\r\n      allOrder: [],\r\n      pageNum: 0,\r\n      pageSize: 3,\r\n      total: 0,\r\n      dialogVisible:false,\r\n      orderId:0,\r\n      rateVal:null,\r\n    };\r\n  },\r\n  methods: {\r\n    removeOrder(val) {\r\n      this.$confirm(\"是否删除此订单？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n        center: true,\r\n      })\r\n        .then(() => {\r\n          // console.log(res);\r\n          this.$http.post(`/order/removeUserOrder?id=${val}`).then((res) => {\r\n            // console.log(res);\r\n            if (res.data.code == 200) this.$message.error(\"已删除！\");\r\n            this.findAllUserOrder();\r\n            this.findUserOrderToTal();\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.$message.info(\"已取消！\");\r\n        });\r\n      console.log(val);\r\n    },\r\n    findAllUserOrder() {\r\n      const user_id = window.sessionStorage.getItem(\"logId\");\r\n      // console.log(user_id);\r\n      this.$http\r\n        .post(\r\n          `/order/findAllUserOrderById?user_id=${user_id}&pageNum=${this.pageNum}&pageSize=${this.pageSize}`\r\n        )\r\n        .then((res) => {\r\n          // console.log(res);\r\n          this.allOrder = res.data.data;\r\n          // console.log(this.allOrder);\r\n        });\r\n    },\r\n    findUserOrderToTal() {\r\n      const user_id = window.sessionStorage.getItem(\"logId\");\r\n      this.$http\r\n        .post(`/order/findUserOrderToTal?user_id=${user_id}`)\r\n        .then((res) => {\r\n          // console.log(res);\r\n          this.total = res.data.data;\r\n        });\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.findAllUserOrder();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pageNum = val;\r\n      this.findAllUserOrder();\r\n    },\r\n    // 确认收货\r\n    // （中传方法）\r\n    findConfirmId(id){\r\n      this.dialogVisible = true;\r\n      this.orderId = id;\r\n    },\r\n    confirmGoods() {\r\n      // console.log(this.orderId);\r\n      this.$http.post('/order/confirmGoods',this.orderId).then((res)=>{\r\n        // console.log(res);\r\n        if(res.data.code==200){\r\n          this.$message.success('已确认收货')\r\n          this.findAllUserOrder();\r\n        }\r\n      })\r\n      // console.log(this.rateVal);\r\n      this.dialogVisible = false;\r\n    },\r\n    cancelOrder(id) {\r\n      // console.log(id);\r\n      this.$http.post('/order/noPay',id).then((res) => {\r\n        // console.log(res);\r\n        if (res.data.code == 200) {\r\n          this.$message.info(\"已取消订单\");\r\n          this.findAllUserOrder();\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.app {\r\n  height: 100%;\r\n}\r\n#waitGoods {\r\n  font-size: 12px;\r\n  padding: 0px 0px 0px 30px;\r\n}\r\n#waitPay {\r\n  font-size: 12px;\r\n  padding: 0px 0px 0px 30px;\r\n}\r\n#wait {\r\n  position: relative;\r\n  bottom: 10px;\r\n  left: -10px;\r\n}\r\n.waitPay {\r\n  position: relative;\r\n  bottom: 10px;\r\n  left: -10px;\r\n}\r\n</style>"],"sourceRoot":"src/views/reception/User"}]}